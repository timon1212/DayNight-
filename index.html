<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DayNight Vending</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; }
    header { display:flex; align-items:center; padding:10px; background:#2a5298; color:white; }
    #logo { height:50px; margin-right:10px; }

    /* Login Page */
    #loginPage { display:none; height:100vh; width:100vw; justify-content:center; align-items:center; background:linear-gradient(135deg,#1e3c72,#2a5298); }
    #loginBox { background:white; padding:30px; border-radius:10px; width:300px; box-shadow:0 8px 16px rgba(0,0,0,0.3); text-align:center; }
    #loginBox input { width:90%; padding:10px; margin:10px 0; border:1px solid #ccc; border-radius:5px; font-size:16px; }
    #loginBox button { width:95%; padding:10px; margin-top:10px; background:#2a5298; border:none; color:white; font-size:16px; border-radius:5px; cursor:pointer; }
    #loginBox button:hover { background:#1e3c72; }
    #loginBox small { display:block; margin-top:10px; color:#555; cursor:pointer; text-decoration:underline; }
    .card { padding:20px; margin:20px; border-radius:10px; background:#f5f5f5; box-shadow:0 4px 8px rgba(0,0,0,0.1); }
  </style>
</head>
<body>

  <!-- LOGIN PAGE -->
  <div id="loginPage">
    <div id="loginBox">
      <h2>DayNight Vending</h2>
      <input type="text" id="loginUsername" placeholder="Username">
      <input type="password" id="loginPassword" placeholder="Password">
      <button onclick="login()">Login</button>
      <small onclick="showRegister()">Create Account</small>

      <div id="registerFields" style="display:none; margin-top:10px;">
        <input type="text" id="regUsername" placeholder="Username">
        <input type="password" id="regPassword" placeholder="Password">
        <button onclick="register()">Register</button>
        <small onclick="showLogin()">Back to Login</small>
      </div>
    </div>
  </div>

  <!-- MAIN APP -->
  <div id="mainApp" style="display:none;">

    <header>
      <img src="assets/logo.png" alt="DayNight Vending Logo" id="logo">
      <h1>DayNight Vending</h1>
    </header>

    <!-- INVENTORY SECTION -->
    <section id="inventorySection" class="card">
      <h2>Inventory & Sales</h2>
      <table id="inventoryTable">
        <thead>
          <tr>
            <th>Name</th>
            <th>Cost</th>
            <th>Price</th>
            <th>Qty</th>
            <th>Profit</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <div id="restockSuggestions"></div>

      <!-- Add Stock -->
      <h3>Update Stock</h3>
      <label for="inventorySelect">Select Item:</label>
      <select id="inventorySelect"></select>
      <label for="inventoryAddQty">Quantity to Add:</label>
      <input type="number" id="inventoryAddQty" placeholder="Enter quantity">
      <button onclick="addInventoryStock()">Add Stock</button>

      <!-- Add New Item -->
      <h3>Add New Inventory Item</h3>
      <input type="text" id="newItemName" placeholder="Item Name">
      <input type="number" step="0.01" id="newItemCost" placeholder="Cost per unit">
      <input type="number" step="0.01" id="newItemPriceSingle" placeholder="Sell Price Single">
      <input type="number" step="0.01" id="newItemPriceBundle" placeholder="Sell Price Bundle">
      <input type="number" id="newItemQty" placeholder="Starting Quantity">
      <button onclick="addNewItem()">Add New Item</button>
    </section>

    <!-- FINANCE SECTION -->
    <section id="financeSection" class="card">
      <h2>Finance & Analytics</h2>
      <input type="number" id="moneySpent" placeholder="Money Spent $">
      <input type="number" id="moneyEarned" placeholder="Money Earned $">
      <button onclick="calculateFinance()">Update</button>
      <div id="financeResult"></div>
      <canvas id="financeChart"></canvas>
    </section>

    <!-- ROUTES SECTION -->
    <section id="routesSection" class="card">
      <h2>Routes & Maps</h2>
      <select id="routeSelect"></select>
      <input type="text" id="newRouteName" placeholder="New Route">
      <button onclick="createNewRoute()">Create Route</button>
      <div id="map" style="height:400px;"></div>
      <input type="text" id="pinName" placeholder="Stop Name">
      <input type="number" id="pinLat" placeholder="Latitude">
      <input type="number" id="pinLng" placeholder="Longitude">
      <button onclick="addPin()">Add Pin</button>
      <div id="routePerformance"></div>
    </section>

    <!-- DRIVERS SECTION -->
    <section id="driversSection" class="card">
      <h2>Drivers & Leaderboards</h2>
      <input type="text" id="newDriverName" placeholder="Driver Name">
      <button onclick="addDriver(document.getElementById('newDriverName').value)">Add Driver</button>
      <div id="driverPerformance"></div>
      <div id="driverLeaderboard"></div>
      <div id="driverEfficiency"></div>
    </section>

    <!-- FORMS SECTION -->
    <section id="formsSection" class="card">
      <h2>Forms & Inspections</h2>
      <input type="text" id="formField1" placeholder="Field 1">
      <input type="text" id="formField2" placeholder="Field 2">
      <input type="file" id="formPhoto" accept="image/*">
      <button onclick="submitForm()">Submit Form</button>
      <ul id="formSubmissions"></ul>
    </section>

    <!-- GAS SECTION -->
    <section id="gasSection" class="card">
      <h2>Gas Calculator</h2>
      <select id="gasRouteSelect"></select>
      <input type="number" id="vehicleMPG" placeholder="Vehicle MPG" value="15">
      <input type="number" id="gasPrice" placeholder="Gas $/gal" value="3.50">
      <button onclick="computeGas()">Calculate Gas</button>
      <div id="gasResult"></div>
    </section>

  </div>

  <script src="app.js"></script>
</body>
</html>
